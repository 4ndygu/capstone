(function(t){function e(e){for(var o,r,a=e[0],d=e[1],c=e[2],u=0,h=[];u<a.length;u++)r=a[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&h.push(n[r][0]),n[r]=0;for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(t[o]=d[o]);l&&l(e);while(h.length)h.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],o=!0,a=1;a<i.length;a++){var d=i[a];0!==n[d]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var o={},n={"cite-grid":0},s=[];function r(e){if(o[e])return o[e].exports;var i=o[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=o,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(i,o,function(e){return t[e]}.bind(null,o));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/static/dist/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],d=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=d;s.push([9,"chunk-common"]),i()})({"00be":function(t,e,i){"use strict";i("4d40")},"4d40":function(t,e,i){},9:function(t,e,i){t.exports=i("dd42")},dd42:function(t,e,i){"use strict";i.r(e);var o=i("a4b5"),n=i("4af9"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",[i("h2",[t._v("Map view")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-3 col-md-12"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"hoveredJurSelect"}},[t._v("Selected jurisdiction:")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.hoveredJur,expression:"hoveredJur"}],staticClass:"form-control",attrs:{id:"hoveredJurSelect"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.hoveredJur=e.target.multiple?i:i[0]}}},[i("option",{attrs:{disabled:"",value:""}},[t._v("Select one, or hover on the map")]),t._l(t.jurisdictions,(function(e){return i("option",{key:e.id,domProps:{value:e}},[t._v(t._s(e.name_long))])}))],2)]),i("div",{staticClass:"form-check"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.mapDirection,expression:"mapDirection"}],staticClass:"form-check-input",attrs:{type:"radio",id:"mapDirectionInbound",value:"inbound"},domProps:{checked:t._q(t.mapDirection,"inbound")},on:{change:function(e){t.mapDirection="inbound"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"mapDirectionInbound"}},[t._v("Inbound citations")])]),i("div",{staticClass:"form-check"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.mapDirection,expression:"mapDirection"}],staticClass:"form-check-input",attrs:{type:"radio",id:"mapDirectionOutbound",value:"outbound"},domProps:{checked:t._q(t.mapDirection,"outbound")},on:{change:function(e){t.mapDirection="outbound"}}}),i("label",{staticClass:"form-check-label",attrs:{for:"mapDirectionOutbound"}},[t._v("Outbound citations")])]),i("div",{attrs:{id:"hovered-map-message"}},[t.hoveredJur?i("span",[t._v(" Darker states are more likely to "+t._s("inbound"===t.mapDirection?"cite to":"be cited by")+" "+t._s(t.hoveredJur.name_long)+". ")]):i("span",[t._v(" Hover over a state to see what other states "+t._s("inbound"===t.mapDirection?"most often cite it":"it most often cites")+". ")])])]),i("div",{staticClass:"col-lg-9 col-md-12",attrs:{"aria-label":"United States map showing frequency of citations from one jurisdiction to another by color"}},[i("div",{attrs:{"aria-hidden":"true"}},[i("USMap",{staticClass:"map",on:{mouseover:t.mapMouseover,mouseleave:t.mapMouseleave}})],1)])]),i("h2",[t._v("Grid view")]),i("p",[t._v(" This grid shows what percentage of the citations "),i("i",[t._v("by")]),t._v(" each state on the left are "),i("i",[t._v("to")]),t._v(' each state on the top. For example, the square in the row marked "Alaska" and column marked "Cal." indicates that 2.5% of all citations extracted from Alaska cases are to California cases. '),i("a",{attrs:{href:"#",download:"cite-grid.csv"},on:{click:t.csvDownloadClicked,contextmenu:t.csvDownloadClicked}},[t._v("Download CSV")]),t._v(". ")]),i("div",[t._v(" Coloring of each square is logarithmic to emphasize the range between 0 and 10%:"),i("br"),t._v(" 0% "),i("div",{staticStyle:{display:"inline-block","background-color":"white"}},t._l(20,(function(e){return i("span",{key:e,style:{backgroundColor:t.percentageColor((e-1)/2),width:"1em",display:"inline-block"},attrs:{title:(e-1)/2+"%"}})})),0),t._v(" 10% ")]),i("p",[t._v(" Hover over a grid square for details: ")]),i("div",{staticClass:"table-scroll"},[t.dataLoaded?i("table",[i("tr",[i("th",{class:{"top-header":!0,"left-header":!0,disabled:t.selfDisabled},on:{click:function(e){t.selfDisabled=!t.selfDisabled}}},[t.hoveredGridMessage?i("div",{staticClass:"hovered-grid-message"},[t._v(t._s(t.hoveredGridMessage))]):t._e(),i("div",[t._v("Self")])]),t._l(t.jurisdictions,(function(e){return i("th",{key:e.id,class:{rotate:!0,"top-header":!0,disabled:t.disabled[e.id]},attrs:{scope:"col"},on:{click:function(i){return t.toggleJurisdiction(e)}}},[i("div",[t._v(t._s(e.name))])])}))],2),t._l(t.jurisdictions,(function(e){return i("tr",{key:e.id},[i("th",{staticClass:"left-header",attrs:{scope:"row"}},[t._v(t._s(e.name))]),t._l(t.jurisdictions,(function(o){return i("td",{key:o.id,style:{backgroundColor:t.countColor(e,o)},attrs:{title:t.hoverText(e,o)},on:{mouseover:function(i){t.hoveredGridMessage=t.hoverText(e,o)},mouseleave:function(e){t.hoveredGridMessage=null}}})}))],2)}))],2):t._e()])])])},r=[],a=i("4428"),d=i.n(a),c=i("0afd"),l=i("376f");const u=(t,e)=>t.reduce((t,i)=>(t[e(i)]=i,t),{}),h=t=>t.reduce((t,e)=>t+(e||0),0);var p={name:"Main",components:{USMap:l["a"]},async mounted(){this.jurisdictions=await this.getJSON("jurisdictions.json");for(const t of this.jurisdictions)t.id=t.id.toString();this.jurisdictionsById=u(this.jurisdictions,t=>t.id),this.jurisdictionsBySlug=u(this.jurisdictions,t=>t.slug),this.jurisdictionsNotOnMap=u(this.jurisdictions.filter(t=>null===document.getElementById(t.slug)),t=>t.id),this.totals=await this.getJSON("totals.json"),this.dataLoaded=!0},data(){return{jurisdictions:null,totals:null,totalsByYear:null,selfDisabled:!1,disabled:{},dataLoaded:!1,detailJurisdiction:null,hoveredJur:null,mapDirection:"inbound",hoveredGridMessage:null}},watch:{hoveredJur:function(t){if(t){const e=t.id,i=document.getElementById(t.slug);i.style.fillOpacity=1,i.classList.add("focused");const o="inbound"===this.mapDirection?this.inboundCounts:this.outboundCounts,n=Math.max(...o(e,this.jurisdictionsNotOnMap));for(const t of this.jurisdictions){if(t.id===e)continue;const i="inbound"===this.mapDirection?this.totals[t.id][e]:this.totals[e][t.id],o=document.getElementById(t.slug);o&&(o.style.fillOpacity=i/n,o.classList.remove("focused"))}}}},methods:{async getJSON(t){return await Object(c["b"])("/download/citation_graph/2020-05-08/aggregations/"+t)},citePercentage(t,e){const i=this.jurisdictionsById[t.id].cites;let o=0;return i&&(o=(this.totals[t.id][e.id]||0)/i*100),o?o.toFixed(1):0},countColor(t,e){return this.percentageColor(this.citePercentage(t,e))},percentageColor(t){return`rgba(44, 96, 255, ${this.logPercentage(t)}%)`},hoverText(t,e){let i=this.citePercentage(t,e);return`${this.jurisdictionsById[t.id].name} cites ${this.jurisdictionsById[e.id].name} ${i}%`},toggleJurisdiction(t){this.disabled[t.id]?this.$delete(this.disabled,t.id):this.$set(this.disabled,t.id,!0)},inboundCounts(t,e){return e||(e={}),Object.entries(this.totals).filter(([i,o])=>i!==t&&!e[i]&&o[t]>0).map(([e,i])=>i[t])},outboundCounts(t,e){return e||(e={}),Object.entries(this.totals[t]).filter(([i,o])=>i!==t&&!e[i]&&o>0).map(([t,e])=>e)},totalInbound(t){return h(this.inboundCounts(t))},totalOutbound(t){return h(this.outboundCounts(t))},mapMouseover(t){if(!this.dataLoaded)return;const e=t.target;e.classList.contains("state")&&(this.hoveredJur=this.jurisdictionsBySlug[e.parentElement.id])},mapMouseleave(t){},logPercentage(t){return t<.1?t:(Math.log(t)-Math.log(.1))/(Math.log(100)-Math.log(.1))*100},csvDownloadClicked(t){let e=[];e.push(["",...this.jurisdictions.map(t=>t.name_long)]);for(const i of this.jurisdictions)e.push([i.name_long,...this.jurisdictions.map(t=>this.citePercentage(i,t))]);e="data:text/csv;base64,"+btoa(d()(e)),t.currentTarget.href=e}}},v=p,f=(i("00be"),i("a6c2")),m=Object(f["a"])(v,s,r,!1,null,"79289054",null),b=m.exports;o["default"].config.devtools=!0,o["default"].config.productionTip=!1,o["default"].use(n["a"]);const g=new n["a"]({mode:"history",base:"/exhibits/cite-grid/",routes:[{path:"/",component:b,name:"main"},{path:"*",redirect:"/"}]});new o["default"]({el:"#app",components:{Main:b},template:"<Main/>",router:g})}});
//# sourceMappingURL=cite-grid.d1a2006f.js.map