{% extends "layouts/centered.html" %}
{% load pipeline %}
{% load static %}
{% block extra_head %}
  {% stylesheet 'case' %}
{% endblock %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
  <div class="case-container header-margin">
    <div class="metadata">
      <div class="reporter-and-volume-container">
        <p class="reporter-and-volume">
          <a href="{{ metadata.reporter.url }}">
            {{ metadata.reporter.full_name }}</a>,
          No.<a href="{{ metadata.volume.url }}">
          {{ metadata.volume.volume_number }}.</a>
          <span class="pages">p.{{ metadata.first_page }}&ndash;{{ metadata.last_page }}.</span>
        </p>
      </div>

      <div class="text-center">
        <p class="">
          <a href="{{ metadata.court.url }}">{{ metadata.court.name }}</a>
          {% if metadata.docket_number %}
            {{ metadata.docket_number }}{% endif %}
        </p>
        <p>
          {{ metadata.decision_date }}
        </p>
      </div>
      <div id="citation_container" class="text-center">
        <p title="official citation" class="center" id="citation_for_copy"
           name="citation">{{ citation_full }}
          <!--<button data-toggle="tooltip" title="Copy Citation to Clipboard" id="citation_copy"
              onclick="CopyToClipboard('citation_for_copy')">
        <img src="{% static "img/copy_icon.png" %}" alt="Copy Citation to Clipboard">
      </button>-->
        </p>
  </div>

      </div>
      {% if reason == 'error_auth_required' %}
        <section class="name">
          <h4 class="text-center">{{ metadata.name }}</h4>
          <br/>
          <div class="alert-warning text-center">
            <h6 class="case-viewing-error">
              You must be signed in to see the full
              case.</h6>
          </div>
        </section>
      {% elif reason == 'other' %}
        <div class="alert-warning text-center">
          <h6 class="case-viewing-error">
            Could not load case body</h6>
        </div>
        </div>
      {% else %}
        {{ case_html|safe }}
      {% endif %}

  <script>
    /*
    This bit of script selects the citation input and copies it. It then informs the users that the citation was copied
    by applying the citation_copied class.
     */

    function copyCitation() {
      let citation_container = document.getElementById("citation_container");
      let cite = document.getElementById("citation_for_copy");
      cite.select();
      document.execCommand("copy");
      citation_container.classList.add("citation_copied");
    }
  </script>
{% endblock %}
